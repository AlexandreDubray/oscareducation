-extends "base.haml"

-block content

  %h2 Statistiques d'usage
  %hr

  .panel.panel-default
    .panel-heading
      Statistiques générales

    .panel-body
      %p
        %b Nombre de professeurs :
        =professors.count

      %p
        %b Nombre d'élèves :
        =students.count

      %p
        %b Nombre de classes :
        =lessons.count

  .panel.panel-default
    .panel-heading
      Par professeur

    .panel-body
      -for prof in professors
        %p
          %b= prof|capfirst
          ({{ prof.students.count }} élèves)
          :
        %ul
          -for lesson in prof.lesson_set.all
            %li= lesson
              ({{ lesson.students.count }} élèves)
              %ul
                -for test in lesson.basetest_set.all
                  %li
                    =test
                    -if test.test
                      (test en ligne)
                    -else
                      (évaluation libre)
