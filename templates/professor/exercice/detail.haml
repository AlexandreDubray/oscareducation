-extends "base.haml"

-block content
  %ol.breadcrumb
    %li
      %a{href: "{% url 'professor:dashboard' %}"} Oscar
    %li
      %a{href: "{% url 'professor:exercice_list' %}"} Oscar
        Questions
    %li
      Question n°
      =exercice.id

  -if not exercice.approved
    %div.alert.alert-warning
      Exercice en attente d'approbation

  %h2 Question n°
    =exercice.id
    sur
    =exercice.skill.code
    %small
      =exercice.skill.name
    .pull-right
      -if user.is_superuser or exercice.added_by == user
        %a.btn.btn-sm.btn-success{href: "{% url 'professor:exercice_update' exercice.id %}"}
          Éditer
      %a.btn.btn-sm.btn-primary{href: "{% url 'professor:exercice_list' %}"}
        Voir toutes les questions

  %hr

  -if exercice.content
    .well
      =exercice.content|safe

  -for label, question in exercice.get_questions.items
    .form-group
      %label{for: "{{ forloop.counter0 }}"}= label|safe
      -if question.type == "text"
        %input.form-control{id: "{{ forloop.counter0 }}", name: "{{ forloop.counter0 }}", type: "text", disabled: "disabled"}
        %div{style: "margin-left: 20px; margin-top: 10px"}
          %p Réponses correctes :
          %ul
            -for answer in question.answers
              %li= answer
      -elif question.type == "math"
        %input.form-control{id: "{{ forloop.counter0 }}", name: "{{ forloop.counter0 }}", type: "text", disabled: "disabled"}
        %div{style: "margin-left: 20px; margin-top: 10px"}
          %p Réponses correctes :
          %ul
            -for answer in question.answers
              %li \({{answer}}\) (code latex: <code>{{ answer }}</code>)
      -elif question.type == "radio"
        -with name=forloop.counter0
          -for option, valid in question.answers.items
            .radio
              %label
                %input{type: "radio", value: "{{ forloop.counter0 }}", name: "{{ name }}", disabled: "disabled"}
                %span{style: "color: {% if valid %}green{% else %}red{% endif %}"}
                  =option
      -elif question.type == "checkbox"
        -with name=forloop.counter0
          -for option, valid in question.answers.items
            .radio
              %label
                %input{type: "checkbox", value: "{{ forloop.counter0 }}", name: "{{ name }}", disabled: "disabled"}
                %span{style: "color: {% if valid %}green{% else %}red{% endif %}"}
                  =option
      -else
        =question.type
