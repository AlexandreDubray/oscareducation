-extends "base.haml"

-block breadcrumb
  %ol.breadcrumb
    %li
      %a{href: "{% url 'professor:dashboard' %}"} Oscar
    %li
      Questions

-block content
  %h3 Questions
    %br
      %a.btn.btn-primary{href: "{% url 'professor:exercice_validation_form' %}"}
        Ajouter une question
      %a.btn.btn-success{href: "{% url 'professor:skill_list' %}"}
        Compétences et ressources
  %hr

  .ligneorange

  .container-fluid.boxclassetitle

  .ligneorangefine

  .boxclasse.container-fluid
    -regroup exercice_list by skill.stage_set.first as stages
    -for stage in stages
      %h5= stage.grouper

      -regroup stage.list by skill as exercices_by_skills

      -for skill in exercices_by_skills
        %h6
          =skill.grouper.code
          %small
            =skill.grouper.name
        -for exercice in skill.list
          %ul
            %li
              %a{href: "{% url 'professor:exercice_detail' exercice.pk %}"}
                Question n°
                =exercice.id
              -if not exercice.approved
                %span.label.label-warning
                  en attente d'approbation

    %h3 Compétences sans questions

    %ul
      -for skill in skills_without_exercices
        %li
          =skill.code
          \-
          =skill.name
