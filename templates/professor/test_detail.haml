-extends "base.haml"

-block content
  %ol.breadcrumb
    %li= object.lesson.stage.name
    %li
      %a{href: "{% url 'professor_lesson_detail_view' object.lesson.id %}"}
        Classe
        =object.lesson.name
    %li.active
      Test
      =object.name

  %h2 Test {{ object.name }} de <i style="color: grey">{{ object.display_test_type }}</i> pour la classe <a href="{% url 'professor_lesson_detail_view' object.lesson.pk %}">{{ object.lesson.name }}</a>
  %hr

  %h3 Réponse des élèves :

  %table.table.table-bordered
    %thead
      %th{width: "20%"}
        Élève / Compétences
      -for i in object.testexercice_set.all
        %th
          =i.skill.code
    -for test_student in object.teststudent_set.all
      %tr
        %td
          %a{href: "{% url 'professor_student_test_view' test_student.student.pk test_student.pk %}"}
            =test_student.student
        -for answer in test_student.answer_set.all
          %td{class: "{% if answer.correct %}success{% else %}danger{% endif %}"}

  %h3 Compétences sélectionnées :
  %ul
    -for skill in object.skills.all
      %li
        %a{href: "{% url 'professor_skill_detail_view' skill.code %}"}
          =skill.code
          \-
          =skill.name
