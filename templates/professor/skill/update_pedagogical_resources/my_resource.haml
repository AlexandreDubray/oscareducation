-load crispy_forms_tags
-load lesson_tags


%h5 Ressources personnelles
          %small pour mes élèves uniquement
          %button.show-form.btn.btn-sm.btn-primary{data-target: "#personal_resource-form"}
            Ajouter
-if user.professor
    .panel.panel-default{style: "display: none", id: "personal_resource-form"}
      .panel-heading= title
      .panel-body
        %form{method: "POST", enctype: "multipart/form-data", action: ""}
          -csrf_token

          -if resource_form.errors
            =resource_form.errors
          %input{type: "hidden", value: "{{ kind }}", name: "form_type"}
          %input{type: "hidden", value: "{{ kind }}", name: "section"}
          %input{type: "hidden", value: "{{ object.pk }}", name: "skill"}
          %input{type: "hidden", value: "{{ request.user.pk }}", name: "added_by"}
          .col-md-6
            -include "professor/skill/update_pedagogical_resources/media/title_field.haml"
          .col-md-6
            -include "professor/skill/update_pedagogical_resources/media/kind_field.haml"
          .row
            %div
              %button.btn.btn-success.addMore.btn-links{type: "button", "data-target":"link"}
                %span.glyphicon.glyphicon-plus
                Ajouter un lien
                %span.badge
                  0
              %button.btn.btn-success.addMore.btn-files{type: "button", "data-target":"file"}
                %span.glyphicon.glyphicon-plus
                Ajouter un fichier
                %span.badge
                  0
            %div{id:'personal_resource'}
              %ul.list-group
                -include "professor/skill/update_pedagogical_resources/media/link_fields.haml"
              %ul.list-group
                -include "professor/skill/update_pedagogical_resources/media/file_fields.haml"

 
%ul.list-group
  -for resource in personal_resources
    %li.list-group-item
      %p.list-group-item-heading=resource.content.title
        %small.badge=resource.id
        -if resource.content.author
          par
          %span
            =resource.content.author
        %small.badge= resource.content.kind
      %p.list-group-text
        -if resource.content.comment
         %small=resource.content.comment|safe
         %hr
        -for item in resource.content.resoures
          -if item.link|cut:" "|length > 0 or  item.file|cut:" "|length > 0
            .row
              .col-md-12
                -if item.optionalName
                    %p.small=item.optionalName
                %p.badge=item.mediaType
                -if item.link|cut:" "|length > 0 and item.mediaType == "link"
                  %p=item.link
                    %a.btn.btn-primary.btn-lg{href: "{{ item.link }}", target: "_blank"}
                      %span.glyphicon.glyphicon-link Visiter
                -if item.file|cut:" "|length > 0 and item.mediaType == "file"
                  %p=item.file
                  %a.btn.btn-primary.btn-lg{href: "{{ MEDIA_URL }}{{ item.file }}", target: "_blank"}
                    %span.glyphicon.glyphicon-save-file Télécharger
    -if user.professor and resource.added_by == request.user
        //%a.btn.btn-danger.btn-sm.remove.delete{href: "{% url 'professor:remove_pedagogical_ressources' 'resource' resource.id %}"}
          supprimer


