-extends "base.haml"

-block content
  %ol.breadcrumb
    %li
      %a{href: "{% url 'professor:dashboard' %}"} Oscar
    %li.active
      Compétences

  %h2 Compétences
    .pull-right
      %a.btn.btn-primary{href: "{% url 'professor:exercice_validation_form' %}"}
        valider le format d'un exercice
      %a.btn.btn-default{href: "{% url 'professor:exercice_list' %}"}
        exercices
  %hr

  #accordion.panel-group{role: "tablist", aria-multiselectable: "true"}
    -for stage in object_list
      .panel.panel-default
        .panel-heading{id: "heading{{ stage.id }}", role: "tab"}
          %h4.panel-title
            %a.collapsed{role: "button", data-toggle: "collapse", data-parent: "#accordion", href: "#collapse{{ stage.id }}", aria-expanded: "false", aria-controls: "collapse{{ stage.id }}"}
              =stage.name

        .panel-collapse.collapse{role: "tabpanel", aria-labelledby: "heading{{ stage.id }}", id: "collapse{{ stage.id }}"}
          %table.table
            %col
            %col
            %col{width: "200px"}
            %col
            -for skill in stage.skills.all
              %tr
                %td
                  %a.btn.btn-default{href: "{% url 'professor:skill_detail' skill.code %}"}= skill
                %td
                  =skill.name
                %td
                  %ul.exercices
                    -for exercice in skill.exercice_set.all
                      %li
                        %a{href: "{% url 'professor:exercice_detail' exercice.id %}"}
                          Exercice
                          =exercice.file_name
                    -empty
                      %i Pas d'exercices disponibles.
                %td
                  %a.btn.btn-primary{href: "{% url 'professor:skill_update_pedagogical_ressources' skill.code %}"}
                    Ajouter une ressource

  :css
    .exercices {
      padding-left: 0;
    }

    .exercices li {
      list-style-type: none;
    }
